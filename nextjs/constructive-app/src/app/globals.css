/* =============================================================================
 * Constructive Boilerplate - Global Styles
 * 
 * Base design system is imported from @constructive-io/ui (published npm package).
 * This file contains only app-specific overrides and extensions.
 * ============================================================================= */

/* Import base design system (includes tailwindcss, tw-animate-css, design tokens, base utilities) */
@import '@constructive-io/ui/globals.css';

/* Ensure Tailwind scans app source files for class detection */
@source "../";

/* Scan @constructive-io/ui compiled output so Tailwind detects classes used in UI components.
   The published package's @source "../components" resolves to a non-existent src/components/,
   so we must explicitly point Tailwind at the dist/ directory. */
@source "../../node_modules/@constructive-io/ui/dist";

@plugin "@tailwindcss/typography";

/* =============================================================================
 * App-specific: Skeleton & Loading Transitions
 *
 * Provides smooth transitions between skeleton loading states and content.
 * Respects user motion preferences.
 * ============================================================================= */
@layer utilities {
	/* Skeleton container fade-out when content is ready */
	[data-slot='skeleton-container'] {
		transition: opacity 150ms ease-out;
	}

	/* Content fade-in after skeleton */
	[data-slot='content-fade-in'] {
		animation: content-fade-in 200ms ease-out forwards;
	}

	@keyframes content-fade-in {
		from {
			opacity: 0;
		}
		to {
			opacity: 1;
		}
	}

	/* Shell frame loading state */
	[data-slot='shell-loading'] {
		opacity: 1;
		transition: opacity 150ms ease-out;
	}

	/* Skeleton pulse with consistent timing */
	[data-slot='skeleton'] {
		animation: skeleton-pulse 1.5s ease-in-out infinite;
	}

	@keyframes skeleton-pulse {
		0%, 100% {
			opacity: 1;
		}
		50% {
			opacity: 0.5;
		}
	}

	/* Reduced motion: disable all skeleton animations */
	@media (prefers-reduced-motion: reduce) {
		[data-slot='skeleton-container'],
		[data-slot='content-fade-in'],
		[data-slot='shell-loading'] {
			animation: none !important;
			transition: none !important;
		}

		[data-slot='skeleton'] {
			animation: none !important;
		}
	}
}
